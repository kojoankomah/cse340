<!-- account/management.ejs -->

<div class="management-container">
  <section class="management-card">
    <h1>Account Management</h1>

    <!-- Flash Message Display -->
    <% if (messages && messages.notice) { %>
      <div class="flash-message">
        <% messages.notice.forEach(function(msg){ %>
          <p><%= msg %></p>
        <% }) %>
      </div>
    <% } %>

    <% if (errors && errors.length > 0) { %>
      <ul class="error-list">
        <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
        <% }) %>
      </ul>
    <% } %>

    <% if (locals.accountData) { %>
      <!-- Personalized Greeting -->
      <h2>Welcome <%= locals.accountData.account_firstname %></h2>

      <!-- Update Account Link -->
      <p>
        <a href="/account/update/<%= locals.accountData.account_id %>" class="update-link">
          Update Account Information
        </a>
      </p>

      <!-- Employee/Admin Only Section -->
      <% if (locals.accountData.account_type === "Employee" || locals.accountData.account_type === "Admin") { %>
        <h3>Inventory Management</h3>
        <p>
          <a href="/inv/" class="inventory-link">Access Inventory Management</a>
        </p>
      <% } %>
    <% } else { %>
      <p>Youâ€™re logged in.</p>
    <% } %>
  </section>
</div>

<script>
  // Auto-hide flash messages
  setTimeout(() => {
    const flash = document.querySelector('.flash-message');
    if (flash) {
      flash.style.transition = 'opacity 0.5s ease';
      flash.style.opacity = '0';
      setTimeout(() => flash.remove(), 500);
    }
  }, 4000);
</script>

